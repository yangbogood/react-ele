{"version":3,"sources":["pages/search/index.jsx","components/header/index.jsx"],"names":["Search","state","keys","keysArray","onChange","submit","arr","includes","push","setState","setStore","onKeyup","e","keyCode","clearIndexSearch","index","filter","item","i","goBack","props","history","searchHistory","getStore","this","JSON","parse","className","title","type","placeholder","value","target","onKeyUp","onClick","length","map","removeStore","Component","Header","handleBack","mode","icon","onLeftClick"],"mappings":"6QAOqBA,G,kNACnBC,MAAQ,CACNC,KAAM,GACNC,UAAW,I,EAEbC,SAAW,a,EAIXC,OAAS,WACP,IAAIC,EAAM,EAAKL,MAAME,UAChBG,EAAIC,SAAS,EAAKN,MAAMC,OAA6B,KAApB,EAAKD,MAAMC,OAC/CI,EAAIE,KAAK,EAAKP,MAAMC,MAEpB,EAAKO,SAAS,CACZN,UAAWG,IAEbI,YAAS,gBAAiB,EAAKT,MAAME,a,EAKzCQ,QAAU,SAACC,GACS,KAAdA,EAAEC,SACJ,EAAKR,U,EAITS,iBAAmB,SAACC,GAClB,IAAIT,EAAM,EAAKL,MAAME,UACrBG,EAAMA,EAAIU,OAAO,SAACC,EAAMC,GACtB,OAAOA,IAAMH,IAEf,EAAKN,SAAS,CACZN,UAAWG,IAEbI,YAAS,gBAAiB,EAAKT,MAAME,Y,EAGvCgB,OAAS,WACP,EAAKC,MAAMC,QAAQb,KAAK,Y,mFAGxB,IAAMc,EAAgBC,YAAS,iBAC3BD,GACFE,KAAKf,SAAS,CACZN,UAAWsB,KAAKC,MAAMJ,O,+BAKlB,IAAD,OACP,OACE,yBAAKK,UAAU,UACb,kBAAC,IAAD,CAAQC,MAAO,eAAMT,OAAQK,KAAKL,SAClC,6BAASQ,UAAU,eACjB,6BACE,2BAAOE,KAAK,OAAOC,YAAY,+DAAaH,UAAU,eAAeI,MAAOP,KAAKvB,MAAMC,KAAME,SAAU,SAACQ,GACtG,EAAKH,SAAS,CACZP,KAAMU,EAAEoB,OAAOD,SAEhBE,QAAST,KAAKb,UAChBa,KAAKvB,MAAMC,MAAQ,kBAAC,IAAD,CAAM2B,KAAK,QAAQF,UAAU,QAAQO,QAAS,WAAQ,EAAKzB,SAAS,CAAEP,KAAM,SAElG,4BAAQgC,QAASV,KAAKnB,QAAtB,iBAE+B,IAAhCmB,KAAKvB,MAAME,UAAUgC,QAAiB,6BAASR,UAAU,kBACxD,wDACA,4BAEIH,KAAKvB,MAAME,UAAUiC,IAAI,SAACnB,EAAMC,GAC9B,OACE,wBAAIS,UAAU,gBACZ,0BAAMA,UAAU,gBAAgBV,GAChC,kBAAC,IAAD,CAAMY,KAAK,QAAQK,QAAS,WAAQ,EAAKpB,iBAAiBI,UAMpE,4BAAQS,UAAU,gBAAgBO,QAAS,WACzC,EAAKzB,SAAS,CACZN,UAAW,KAEbkC,YAAY,mBAJd,yCAOF,kBAAC,IAAD,W,GAvF4BC,e,mICJfC,G,iNAEnBC,WAAa,WACX,EAAKpB,MAAMD,U,wEAGX,OACE,4BAAQQ,UAAU,oBACfH,KAAKJ,MAAMD,QAAU,kBAAC,IAAD,CACpBsB,KAAK,OACLC,KAAOlB,KAAKJ,MAAMsB,KAA4B,kBAAC,IAAD,CAAMb,KAAK,WAAhC,kBAAC,IAAD,CAAMA,KAAK,SACpCc,YAAanB,KAAKgB,YAClBhB,KAAKJ,MAAMQ,Y,GAZeU,e","file":"static/js/22.1d7b95fb.chunk.js","sourcesContent":["// @ts-nocheck\r\nimport React, { Component } from 'react';\r\nimport Header from './../../components/header/index.jsx'\r\nimport Footer from '../../components/footer/index.jsx';\r\nimport { SearchBar, Button, Icon } from 'antd-mobile';\r\nimport { setStore, getStore ,removeStore} from \"../../utils/commons\";\r\nimport './index.scss';\r\nexport default class Search extends Component {\r\n  state = {\r\n    keys: '',\r\n    keysArray: []\r\n  }\r\n  onChange = () => {\r\n\r\n  }\r\n\r\n  submit = () => {\r\n    let arr = this.state.keysArray;\r\n    if (!arr.includes(this.state.keys) && this.state.keys !== \"\") {\r\n      arr.push(this.state.keys);\r\n\r\n      this.setState({\r\n        keysArray: arr\r\n      })\r\n      setStore('searchHistory', this.state.keysArray)\r\n    }\r\n\r\n  }\r\n\r\n  onKeyup = (e) => {\r\n    if (e.keyCode === 13) {\r\n      this.submit()\r\n    }\r\n  }\r\n\r\n  clearIndexSearch = (index) => {\r\n    let arr = this.state.keysArray;\r\n    arr = arr.filter((item, i) => {\r\n      return i !== index\r\n    })\r\n    this.setState({\r\n      keysArray: arr\r\n    })\r\n    setStore('searchHistory', this.state.keysArray)\r\n  }\r\n\r\n  goBack = () => {\r\n    this.props.history.push('./msite')\r\n  }\r\n  componentDidMount() {\r\n    const searchHistory = getStore('searchHistory');\r\n    if (searchHistory) {\r\n      this.setState({\r\n        keysArray: JSON.parse(searchHistory)\r\n      })\r\n    }\r\n \r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"search\">\r\n        <Header title={'搜索'} goBack={this.goBack}></Header>\r\n        <section className=\"search_form\" >\r\n          <div>\r\n            <input type=\"text\" placeholder=\"请输入商家或美食名称\" className=\"search_input\" value={this.state.keys} onChange={(e) => {\r\n              this.setState({\r\n                keys: e.target.value\r\n              })\r\n            }} onKeyUp={this.onKeyup} />\r\n            {this.state.keys && <Icon type=\"cross\" className='clear' onClick={() => { this.setState({ keys: '' }) }}></Icon>}\r\n          </div>\r\n          <button onClick={this.submit}>提交</button>\r\n        </section>\r\n        {this.state.keysArray.length !== 0  && <section className=\"search_history\">\r\n          <h4>搜索历史</h4>\r\n          <ul >\r\n            {\r\n              this.state.keysArray.map((item, i) => {\r\n                return (\r\n                  <li className=\"history_list\">\r\n                    <span className=\"history_text\">{item}</span>\r\n                    <Icon type=\"cross\" onClick={() => { this.clearIndexSearch(i) }}></Icon>\r\n                  </li>\r\n                )\r\n              })\r\n            }\r\n          </ul>\r\n          <footer className=\"clear_history\" onClick={() => {\r\n            this.setState({\r\n              keysArray: []\r\n            })\r\n            removeStore('searchHistory')\r\n          }}>清空搜索历史</footer>\r\n        </section>}\r\n        <Footer></Footer>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport { NavBar, Icon } from 'antd-mobile';\r\nimport './index.scss'\r\nexport default class Header extends Component {\r\n\r\n  handleBack = () => {\r\n    this.props.goBack()\r\n  }\r\n  render() {\r\n    return (\r\n      <header className=\"header-container\">\r\n        {this.props.goBack && <NavBar\r\n          mode=\"dark\"\r\n          icon={!this.props.icon ? <Icon type='left' />:<Icon type=\"search\" />}\r\n          onLeftClick={this.handleBack}\r\n        >{this.props.title}</NavBar>}\r\n      </header>\r\n    )\r\n  }\r\n}"],"sourceRoot":""}